{% extends "layout.html" %}
{% block title %}Alertas en Tiempo Real{% endblock %}

{% block content %}
<div class="container py-4">
  <h2 class="mb-4 text-center">ðŸš¨ Alertas en Tiempo Real</h2>

  <div id="alertas" class="list-group"></div>
</div>

<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
<script>
  const socket = io();

  socket.on("nueva_alerta", function(data) {
    const tipo = data.tipo || "Alerta";
    const mensaje = data.mensaje || "Evento detectado";
    const nivel = data.nivel || "bajo";

    let color = "success";
    if (nivel === "medio") color = "warning";
    if (nivel === "alto") color = "danger";

    const alerta = `
      <div class="list-group-item list-group-item-${color}">
        <strong>${tipo}:</strong> ${mensaje}
        <small class="text-muted float-end">${new Date().toLocaleTimeString()}</small>
      </div>
    `;

    document.getElementById("alertas").insertAdjacentHTML("afterbegin", alerta);
  });
</script>
{% endblock %}
