{% extends "layout.html" %}
{% block title %}Motor de Scripting por Evento{% endblock %}

{% block content %}
<div class="container py-4">
  <h2 class="mb-4 text-center">⚙️ Motor de Scripting por Evento</h2>

  <form method="POST" class="border rounded shadow-sm p-4 bg-light mb-4">
    <div class="mb-3">
      <label for="evento" class="form-label">Selecciona un Evento</label>
      <select name="evento" class="form-select" required>
        {% for e in eventos %}
          <option value="{{ e }}">{{ e }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="mb-3">
      <label for="script" class="form-label">Script a ejecutar (Python)</label>
      <textarea name="script" class="form-control" rows="8" placeholder="Ej: enviar_alerta('Violación detectada', 'correo@example.com')" required></textarea>
    </div>

    <div class="text-end">
      <button class="btn btn-primary">Registrar Script</button>
    </div>
  </form>

  {% if resultado %}
  <div class="alert alert-info">
    <pre>{{ resultado }}</pre>
  </div>
  {% endif %}
</div>
{% endblock %}
